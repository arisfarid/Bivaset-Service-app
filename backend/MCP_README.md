# ğŸ¤– Ø³Ø±ÙˆØ± MCP Ø¨ÛŒÙˆØ§Ø³Øª - Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

1. [Ù…Ø¹Ø±ÙÛŒ](#Ù…Ø¹Ø±ÙÛŒ)
2. [Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ](#Ù†ØµØ¨-Ùˆ-Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ)
3. [Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆØ±](#Ø§Ø³ØªÙØ§Ø¯Ù‡-Ø§Ø²-Ø³Ø±ÙˆØ±)
4. [Ø§Ù…Ú©Ø§Ù†Ø§Øª Ùˆ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§](#Ø§Ù…Ú©Ø§Ù†Ø§Øª-Ùˆ-Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§)
5. [Ø§Ù…Ù†ÛŒØª](#Ø§Ù…Ù†ÛŒØª)
6. [Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ](#Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ)
7. [ØªÙˆØ³Ø¹Ù‡](#ØªÙˆØ³Ø¹Ù‡)

## ğŸš€ Ù…Ø¹Ø±ÙÛŒ

Ø³Ø±ÙˆØ± MCP (Model Context Protocol) Ø¨ÛŒÙˆØ§Ø³Øª Ø§Ù…Ú©Ø§Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ù…Ù† Ùˆ Ú©Ù†ØªØ±Ù„â€ŒØ´Ø¯Ù‡ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø³Ø±ÙˆØ± Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ ØªØ§:

- **Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§**: Ø¯Ø³ØªØ±Ø³ÛŒ ÙÙ‚Ø· Ø®ÙˆØ§Ù†Ø¯Ù†ÛŒ Ø¨Ø§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ
- **Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ÛŒÙ†Ù‡**: Ú©Ø´ Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ØªØ¹Ø¯Ø§Ø¯ Ù†ØªØ§ÛŒØ¬
- **Ù„Ø§Ú¯â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ø§Ù…Ù„**: Ø«Ø¨Øª ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø§Ø±Øª
- **API Ø³Ø§Ø¯Ù‡**: Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¢Ø³Ø§Ù† Ø¨Ø±Ø§ÛŒ AI Ù‡Ø§

## ğŸ”§ Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### 1. Ù†ØµØ¨ Ø®ÙˆØ¯Ú©Ø§Ø± (Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ)

```bash
cd backend
python setup_mcp.py
```

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªÙ…Ø§Ù… Ù…ÙˆØ§Ø±Ø¯ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ù†ØµØ¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
- Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²
- Ø§ØªØµØ§Ù„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
- Ù…Ù‡Ø§Ø¬Ø±Øªâ€ŒÙ‡Ø§ÛŒ Django
- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ³Øª
- ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ

### 2. Ù†ØµØ¨ Ø¯Ø³ØªÛŒ

#### Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§
```bash
pip install -r requirements.txt
```

#### Ø§Ø¬Ø±Ø§ÛŒ Ù…Ù‡Ø§Ø¬Ø±Øªâ€ŒÙ‡Ø§
```bash
python manage.py migrate
```

#### Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ
```bash
python -c "import json; json.dump({'mcpServers': {'bivaset-database': {'command': 'python', 'args': ['mcp_server.py']}}}, open('mcp_config.json', 'w'), indent=2)"
```

## ğŸ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆØ±

### Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±ÙˆØ±

```bash
# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±
python mcp_manager.py start

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆØ±  
python mcp_manager.py stop

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯
python mcp_manager.py restart

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
python mcp_manager.py status

# Ù†Ù…Ø§ÛŒØ´ Ù„Ø§Ú¯â€ŒÙ‡Ø§
python mcp_manager.py logs

# ØªØ³Øª Ø³Ø±ÙˆØ±
python mcp_manager.py test
```

### Ø§ØªØµØ§Ù„ AI Ú©Ù„Ø§ÛŒÙ†Øªâ€ŒÙ‡Ø§

Ø³Ø±ÙˆØ± MCP Ø¨Ø± Ø±ÙˆÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ stdio Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¨Ø§ Ú©Ù„Ø§ÛŒÙ†Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù AI Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª:

#### Claude Desktop
ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø±Ø§ Ø¯Ø± `claude_desktop_config.json` Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:

```json
{
  "mcpServers": {
    "bivaset-database": {
      "command": "python",
      "args": ["c:\\path\\to\\backend\\mcp_server.py"],
      "env": {
        "DJANGO_SETTINGS_MODULE": "app.settings"
      }
    }
  }
}
```

#### Python Client
```python
from mcp.client import ClientSession, stdio_client

# Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±
session = await stdio_client("python", ["mcp_server.py"])
await session.initialize()

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ù†Ø§Ø¨Ø¹
resources = await session.list_resources()
tools = await session.list_tools()
```

## ğŸ› ï¸ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ùˆ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§

### Ù…Ù†Ø§Ø¨Ø¹ (Resources)

| Ù…Ù†Ø¨Ø¹ | ØªÙˆØ¶ÛŒØ­ |
|------|-------|
| `bivaset://database/users` | Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† |
| `bivaset://database/projects` | Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ |
| `bivaset://database/categories` | Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ |
| `bivaset://database/proposals` | Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª |
| `bivaset://database/stats` | Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ |

### Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ (Tools)

#### 1. Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§
```json
{
  "name": "search_projects",
  "arguments": {
    "query": "Ø·Ø±Ø§Ø­ÛŒ ÙˆØ¨",
    "category": "Ø·Ø±Ø§Ø­ÛŒ",
    "status": "open",
    "user_role": "client"
  }
}
```

#### 2. Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾Ø±ÙˆÚ˜Ù‡
```json
{
  "name": "get_project_details", 
  "arguments": {
    "project_id": 123
  }
}
```

#### 3. Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
```json
{
  "name": "get_user_projects",
  "arguments": {
    "user_id": 456,
    "phone": "09123456789"
  }
}
```

#### 4. ØªØ­Ù„ÛŒÙ„ Ø¢Ù…Ø§Ø±ÛŒ
```json
{
  "name": "analyze_projects",
  "arguments": {
    "analysis_type": "by_category"
  }
}
```

#### 5. Ú©ÙˆØ¦Ø±ÛŒ Ø§Ù…Ù†
```json
{
  "name": "safe_query",
  "arguments": {
    "query": "SELECT COUNT(*) FROM app_project WHERE status='open'"
  }
}
```

## ğŸ”’ Ø§Ù…Ù†ÛŒØª

### Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ

- **ÙÙ‚Ø· Ø®ÙˆØ§Ù†Ø¯Ù†**: Ø³Ø±ÙˆØ± ØªÙ†Ù‡Ø§ Ø¹Ù…Ù„ÛŒØ§Øª SELECT Ø±Ø§ Ù…Ø¬Ø§Ø² Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯
- **Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ø¬Ø§Ø²**: Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø¨Ù‡ Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ø´Ø®Øµ
- **Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù†ØªØ§ÛŒØ¬**: Ø­Ø¯Ø§Ú©Ø«Ø± 100 Ø±Ú©ÙˆØ±Ø¯ Ø¯Ø± Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª
- **ÙÛŒÙ„ØªØ± Ú©ÙˆØ¦Ø±ÛŒ**: Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ÙÛŒÙ„ØªØ± Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø±Ù†Ø§Ú©
- **Ù„Ø§Ú¯â€ŒÚ¯ÛŒØ±ÛŒ**: Ø«Ø¨Øª ØªÙ…Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§

### Ú©Ù„Ù…Ø§Øª Ù…Ù…Ù†ÙˆØ¹Ù‡ Ø¯Ø± Ú©ÙˆØ¦Ø±ÛŒ
- DELETE, DROP, INSERT, UPDATE
- ALTER, CREATE, TRUNCATE

### Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ø¬Ø§Ø²
- `app_user`
- `app_project` 
- `app_category`
- `app_proposal`
- `app_projectfile`

## ğŸ” Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬

#### 1. Ø®Ø·Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
```bash
# Ø¨Ø±Ø±Ø³ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Django
python manage.py check

# ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
python -c "import django; django.setup(); from django.db import connection; connection.cursor().execute('SELECT 1')"
```

#### 2. Ø®Ø·Ø§ÛŒ Ù¾Ú©ÛŒØ¬ mcp
```bash
# Ù†ØµØ¨ Ù…Ø¬Ø¯Ø¯ Ù¾Ú©ÛŒØ¬
pip install mcp==1.0.0
```

#### 3. Ù…Ø´Ú©Ù„ Ø¯Ø± Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±
```bash
# Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§
python mcp_manager.py logs

# ØªØ³Øª Ø¯Ø³ØªÛŒ
python mcp_server.py
```

### Ù„Ø§Ú¯â€ŒÙ‡Ø§

Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ± Ø¯Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯:
- `mcp_server.log` - Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ
- `mcp_manager.log` - Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª
- `backend.log` - Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Django

## ğŸš€ ØªÙˆØ³Ø¹Ù‡

### Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ù†Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯

```python
@self.server.read_resource()
async def read_resource(uri: str) -> ReadResourceResult:
    if uri == "bivaset://database/new_resource":
        return await self._get_new_resource_data()
```

### Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø¨Ø²Ø§Ø± Ø¬Ø¯ÛŒØ¯

```python
@self.server.call_tool()
async def call_tool(name: str, arguments: Dict[str, Any]) -> CallToolResult:
    if name == "new_tool":
        result = await self._new_tool_function(**arguments)
```

### ØªØ³Øª ØªÙˆØ³Ø¹Ù‡

```bash
# Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„
python mcp_client_test.py

# ØªØ³Øª Ø§Ø¨Ø²Ø§Ø± Ø®Ø§Øµ
python -c "
import asyncio
from mcp_client_test import BivasetMCPClient

async def test():
    client = BivasetMCPClient()
    await client.connect()
    await client.call_tool('search_projects', {'query': 'test'})

asyncio.run(test())
"
```

## ğŸ“Š Ù†Ø¸Ø§Ø±Øª Ùˆ Ø¢Ù…Ø§Ø±

### Ø¢Ù…Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡
```bash
# Ù†Ù…Ø§ÛŒØ´ Ø¢Ù…Ø§Ø± Ø§Ø² Ù„Ø§Ú¯â€ŒÙ‡Ø§
grep "Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±" mcp_server.log | wc -l

# Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯ØªØ±ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
grep "Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±" mcp_server.log | cut -d: -f4 | sort | uniq -c | sort -nr
```

### Ù†Ø¸Ø§Ø±Øª Ø³Ù„Ø§Ù…Øª
```bash
# Ø¨Ø±Ø±Ø³ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ÙˆØ¶Ø¹ÛŒØª
watch -n 30 "python mcp_manager.py status"

# Ù†Ø¸Ø§Ø±Øª Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡
tail -f mcp_server.log
```

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

Ø¯Ø± ØµÙˆØ±Øª Ù…ÙˆØ§Ø¬Ù‡Ù‡ Ø¨Ø§ Ù…Ø´Ú©Ù„:

1. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§: `python mcp_manager.py logs`
2. ØªØ³Øª Ø§ØªØµØ§Ù„Ø§Øª: `python setup_mcp.py`
3. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯: `python mcp_manager.py restart`

---

**Ù†Ú©ØªÙ‡**: Ø§ÛŒÙ† Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ù…Ø­ÛŒØ· Ù¾Ø±ÙˆØ¯Ø§Ú©Ø´Ù† Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ùˆ Ø´Ø§Ù…Ù„ ØªÙ…Ø§Ù… ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ù„Ø§Ø²Ù… Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.
